# ä¸€ã€pythonåŸºç¡€

## 1ã€å­—ç¬¦ä¸²è¿ç®—  

å­—ç¬¦ä¸²æœ‰å¾ˆå¤šè¿ç®—æ–¹å¼ï¼Œæœ€ç›´è§‚çš„æ˜¯å­—ç¬¦ä¸²çš„ + å’Œ * è¿ç®—ï¼Œåˆ†åˆ«è¡¨ç¤ºè¿æ¥å’Œé‡å¤


```python
my_str = "Hello Python!"
my_str*2
```




    'Hello Python!Hello Python!'




```python
my_str + " you are so intersting!"
```




    'Hello Python! you are so intersting!'



å¦‚æœè¦åå‘å­—ç¬¦ä¸²ï¼Œå¯ä»¥ç›´æ¥ç”¨ **[::-1]** è¿›è¡Œç´¢å¼•


```python
my_str[::-1]
```




    '!nohtyP olleH'



**join()æ–¹æ³•** 

    è‹¥åˆ—è¡¨å…ƒç´ éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œå¯ç”¨join()æ–¹æ³•æ‹¼æ¥å­—ç¬¦ä¸²  


```python
str_list = ["that", "is", "so", "beautiful"]
print(" ".join(str_list) + "!")
```

    that is so beautiful!
    

## 2ã€åˆ—è¡¨æ¨å¯¼å¼

å¸¸è§„æ–¹æ³•ç”Ÿäº§ä¸€ä¸ªæ•°å­—åºåˆ—


```python
def func(x):
    return x**2

my_list = []
for i in range(5):
    my_list.append(func(i))

my_list
```




    [0, 1, 4, 9, 16]



åˆ—è¡¨æ¨å¯¼å¼çš„ä¸€èˆ¬è¯­æ³•

>  [ expression for item in * ]

expression ä¸ºæ˜ å°„å‡½æ•°ï¼Œitem ä¸ºæŒ‡ä»£å†…å®¹ï¼Œ* ä¸ºè¿­ä»£å¯¹è±¡

è‹¥éœ€è¦åŠ æ¡ä»¶è¯­å¥

>  [ expression if conditional for item in * ] 


```python
[func(i) for i in range(5)]
```




    [0, 1, 4, 9, 16]




```python
[func(i) if i > 1 else 0 for i in range(6)]
```




    [0, 0, 4, 9, 16, 25]



**æ¨å¯¼å¼å¤šå±‚åµŒå¥—**ï¼Œå¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ç¬¬ä¸€ä¸ªforä¸ºå¤–å±‚å¾ªç¯ï¼Œç¬¬äºŒä¸ªä¸ºå†…å±‚å¾ªç¯ï¼š


```python
[m + "_" + n for m in ("a", "b") for n in ["x", "y"]]
```




    ['a_x', 'a_y', 'b_x', 'b_y']



**æ¡ä»¶èµ‹å€¼**ï¼Œå…¶å½¢å¼ä¸º  
> value = a if condition else bï¼š


```python
value = "æ±ªæ±ªæ±ª" if 2 in [1,2,3] else "å–µå–µå–µ"
value
```




    'æ±ªæ±ªæ±ª'



**ç­‰ä»·å†™æ³•**


```python
a, b = "æ±ªæ±ªæ±ª", "å–µå–µå–µ"
condition = 2 in [1,2,3]
if condition:
    value = a
else:
    value = b

value
```




    'æ±ªæ±ªæ±ª'



## 3ã€åŒ¿åå‡½æ•°ä¸mapæ–¹æ³•

åŒ¿åå‡½æ•°**Lambda**æœ€å¸¸æ‰§è¡Œä¸€äº›ç›´è§‚çš„è¿ç®—ï¼Œå®ƒå¹¶ä¸éœ€è¦æ ‡å‡†çš„å‡½æ•°å®šä¹‰ï¼Œè€Œä¸”ä¹Ÿä¸éœ€è¦æ–°çš„å‡½æ•°åå†æ¬¡è°ƒç”¨ã€‚


```python
my_func = lambda x: x**2
my_func(2)
```




    4



ä¸Šè¿°ç”¨æ³•æœ‰è¿åŒ¿åå‡½æ•°æœ¬æ„ï¼ŒåŒ¿åå‡½æ•°ä¸€èˆ¬ä¸è¿›è¡Œå‘½åï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨


```python
list1 = [(lambda x: x**2)(i) for i in range(5)]
list1
```




    [0, 1, 4, 9, 16]



å¯¹äºä¸Šè¿°çš„è¿™ç§åˆ—è¡¨æ¨å¯¼å¼çš„åŒ¿åå‡½æ•°æ˜ å°„ï¼ŒPythonä¸­æä¾›äº†**mapå‡½æ•°**æ¥å®Œæˆï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ª**mapå¯¹è±¡**ï¼Œéœ€è¦é€šè¿‡listè½¬ä¸ºåˆ—è¡¨ï¼š


```python
list(map(lambda x: x**2, range(5)))
```




    [0, 1, 4, 9, 16]



å¯¹äºå¤šä¸ªè¾“å…¥å€¼çš„å‡½æ•°æ˜ å°„ï¼Œå¯ä»¥é€šè¿‡è¿½åŠ è¿­ä»£å¯¹è±¡å®ç°ï¼š


```python
list(map(lambda x, y: str(x)+'_'+y, range(5), list('abcde')))
```




    ['0_a', '1_b', '2_c', '3_d', '4_e']



## 4ã€zipå¯¹è±¡ä¸enumerateæ–¹æ³•

**zip** å¯ä»¥å°†å¤šä¸ªåˆ—è¡¨ã€ å…ƒç»„æˆ–å…¶å®ƒåºåˆ—æˆå¯¹ç»„åˆæˆä¸€ä¸ªå…ƒç»„æ„æˆçš„å¯è¿­ä»£å¯¹è±¡ï¼Œå®ƒè¿”å›äº†ä¸€ä¸ªzipå¯¹è±¡ï¼Œé€šè¿‡tuple, listå¯ä»¥å¾—åˆ°ç›¸åº”çš„æ‰“åŒ…ç»“æœï¼š


```python
L1, L2, L3 = list("abc"), list("def"), list("gih")
list(zip(L1, L2, L3))
```




    [('a', 'd', 'g'), ('b', 'e', 'i'), ('c', 'f', 'h')]




```python
tuple(zip(L1, L2, L3))
```




    (('a', 'd', 'g'), ('b', 'e', 'i'), ('c', 'f', 'h'))



`zip` å¯ä»¥å¤„ç†ä»»æ„å¤šçš„åºåˆ—ï¼Œ å…ƒç´ çš„ä¸ªæ•°å–å†³äºæœ€çŸ­çš„åºåˆ—


```python
seq1 = ['foo', 'bar', 'baz']
seq2 = ['one', 'two', 'three', 'four']

list(zip(seq1, seq2))
```




    [('foo', 'one'), ('bar', 'two'), ('baz', 'three')]



`zip` å’Œ `*`æ­é…è¿›è¡Œè§£å‹


```python
zipped = list(zip(seq1, seq2))
zipped
```




    [('foo', 'one'), ('bar', 'two'), ('baz', 'three')]




```python
list(zip(*zipped))
```




    [('foo', 'bar', 'baz'), ('one', 'two', 'three')]



ã€å¤‡æ³¨ã€‘è§£å‹åªèƒ½è¿”å›åŸæ¥å‹ç¼©çš„å†…å®¹seq2ä¸­çš„ "four" ç”±äºä¸åœ¨å‹ç¼©çš„è¿­ä»£å¯¹è±¡ä¸­ï¼Œæ•…æ— æ³•è¿”å›

**`enumerate`** æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ‰“åŒ…ï¼Œå®ƒå¯ä»¥åœ¨è¿­ä»£æ—¶ç»‘å®šè¿­ä»£å…ƒç´ çš„éå†åºå·ï¼š

> for i, value in enumerate(collection):

å½“ä½ ç´¢å¼•æ•°æ®æ—¶ï¼Œ ä½¿ç”¨ enumerate çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯è®¡ç®—åºåˆ—ï¼ˆ å”¯ä¸€çš„ï¼‰ dict æ˜ 
å°„åˆ°ä½ç½®çš„å€¼ï¼š


```python
some_list = ['foo', 'bar', 'baz']
dic1 = {}
for nu, va in enumerate(some_list):
    dic1[va] = nu
dic1
```




    {'foo': 0, 'bar': 1, 'baz': 2}



`zip` å¯ä»¥è¿­ä»£å¤šä¸ªåºåˆ—ï¼Œä¹Ÿå¯æ­é…enumerateä½¿ç”¨


```python
se1 = ['foo', 'bar', 'baz']
se2 = ['one', 'two', 'three']
for i, (a, b) in enumerate(zip(se1, se2)):
    print('{0}: {1} {2}'.format(i, a, b))
```

    0: foo one
    1: bar two
    2: baz three
    

# äºŒã€NumpyåŸºç¡€
## 1ã€npæ•°ç»„çš„æ„é€ 
æœ€ä¸€èˆ¬çš„æ–¹æ³•æ˜¯é€šè¿‡`array`æ¥æ„é€ ï¼š


```python
import numpy as np
```


```python
np.array([1, 2, 3])
```




    array([1, 2, 3])



### **ç‰¹æ®Šæ•°ç»„çš„ç”Ÿæˆæ–¹å¼ï¼š**

**ã€aã€‘ç­‰å·®åºåˆ—ï¼š`np.linspace`, `np.arange`**


```python
np.linspace(1,5,11) # èµ·å§‹ã€ç»ˆæ­¢ï¼ˆåŒ…å«ï¼‰ã€æ ·æœ¬ä¸ªæ•°
```




    array([1. , 1.4, 1.8, 2.2, 2.6, 3. , 3.4, 3.8, 4.2, 4.6, 5. ])




```python
len(np.linspace(1,5,11))
```




    11




```python
np.arange(1,5,0.5) # èµ·å§‹ã€ç»ˆæ­¢ï¼ˆä¸åŒ…å«ï¼‰ã€æ­¥é•¿
```




    array([1. , 1.5, 2. , 2.5, 3. , 3.5, 4. , 4.5])



**ã€bã€‘ç‰¹æ®ŠçŸ©é˜µï¼š`zeros`, `eye`, `full`**


```python
np.zeros((2,3)) # ä¼ å…¥å…ƒç»„è¡¨ç¤ºå„ç»´åº¦å¤§å°
```




    array([[0., 0., 0.],
           [0., 0., 0.]])




```python
np.eye(3) # 3*3çš„å•ä½çŸ©é˜µ
```




    array([[1., 0., 0.],
           [0., 1., 0.],
           [0., 0., 1.]])




```python
np.eye(3, k=1) # åç§»ä¸»å¯¹è§’çº¿1ä¸ªå•ä½çš„ä¼ªå•ä½çŸ©é˜µ
```




    array([[0., 1., 0.],
           [0., 0., 1.],
           [0., 0., 0.]])




```python
np.full((2,3), 10) # å…ƒç»„ä¼ å…¥å¤§å°ï¼Œ10è¡¨ç¤ºå¡«å……æ•°å€¼
```




    array([[10, 10, 10],
           [10, 10, 10]])




```python
np.full((2,3), [1,2,3]) # é€šè¿‡ä¼ å…¥åˆ—è¡¨å¡«å……æ¯åˆ—çš„å€¼
```




    array([[1, 2, 3],
           [1, 2, 3]])



**ã€cã€‘éšæœºçŸ©é˜µï¼š`np.random`**  

æœ€å¸¸ç”¨çš„éšæœºç”Ÿæˆå‡½æ•°ä¸º**`rand`, `randn`, `randint`, `choice`** ï¼Œå®ƒä»¬åˆ†åˆ«è¡¨ç¤º**0-1å‡åŒ€åˆ†å¸ƒçš„éšæœºæ•°ç»„ã€æ ‡å‡†æ­£æ€çš„éšæœºæ•°ç»„ã€éšæœºæ•´æ•°ç»„å’Œéšæœºåˆ—è¡¨æŠ½æ ·**ï¼š


```python
np.random.rand(3) # ç”Ÿæˆæœä»0-1å‡åŒ€åˆ†å¸ƒçš„ä¸‰ä¸ªéšæœºæ•°
```




    array([0.78686194, 0.14150128, 0.66352379])




```python
np.random.rand(3, 3) # æ³¨æ„è¿™é‡Œä¼ å…¥çš„ä¸æ˜¯å…ƒç»„ï¼Œæ¯ä¸ªç»´åº¦å¤§å°åˆ†å¼€è¾“å…¥
```




    array([[0.69321446, 0.02589279, 0.5177624 ],
           [0.86836806, 0.74895643, 0.44917273],
           [0.91446313, 0.23897637, 0.43715537]])



å¯¹äºæœä»åŒºé—´`a`åˆ°`b`ä¸Šçš„å‡åŒ€åˆ†å¸ƒå¯ä»¥å¦‚ä¸‹ç”Ÿæˆï¼š


```python
a, b = 5, 15
(b-a)*np.random.rand(3) + a
```




    array([ 8.2544405 ,  8.38389049, 10.47486673])



**`randn`ç”Ÿæˆäº†N(0,I)**çš„æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼š


```python
np.random.randn(3)
```




    array([ 0.99045925, -1.12818397, -0.98422731])




```python
np.random.randn(3,3)
```




    array([[ 1.0596823 ,  0.78790549, -0.27377982],
           [-0.56261307, -0.44039484, -0.96286794],
           [-1.79584687, -0.02533404,  0.20033518]])



å¯¹äºæœä»æ–¹å·®ä¸º$\sigma^2$å‡å€¼ä¸º$\mu$çš„ä¸€å…ƒæ­£æ€åˆ†å¸ƒå¯ä»¥å¦‚ä¸‹ç”Ÿæˆï¼š


```python
sigma, mu = 2.5, 3
mu + np.random.randn(3) * sigma
```




    array([-0.09098904,  1.50320743,  5.09355826])



**`randint`**å¯ä»¥æŒ‡å®šç”Ÿæˆéšæœºæ•´æ•°çš„æœ€å°å€¼æœ€å¤§å€¼å’Œç»´åº¦å¤§å°ï¼š


```python
low, high, size = 5, 15, (2,2)
np.random.randint(low, high, size)
```




    array([[10,  5],
           [10,  7]])



**`choice`**å¯ä»¥ä»ç»™å®šçš„åˆ—è¡¨ä¸­ï¼Œä»¥ä¸€å®šæ¦‚ç‡å’Œæ–¹å¼æŠ½å–ç»“æœï¼Œå½“ä¸æŒ‡å®šæ¦‚ç‡æ—¶ä¸ºå‡åŒ€é‡‡æ ·ï¼Œé»˜è®¤æŠ½å–æ–¹å¼ä¸ºæœ‰æ”¾å›æŠ½æ ·ï¼š


```python
my_list = ['a', 'b', 'c', 'd']
np.random.choice(my_list, 2, replace=False, p=[0.1, 0.7, 0.1 ,0.1])
```




    array(['b', 'a'], dtype='<U1')




```python
np.random.choice(my_list, (3,3))
```




    array([['d', 'b', 'c'],
           ['b', 'b', 'c'],
           ['b', 'b', 'a']], dtype='<U1')



å½“è¿”å›çš„å…ƒç´ ä¸ªæ•°ä¸åŸåˆ—è¡¨ç›¸åŒæ—¶ï¼Œç­‰ä»·äºä½¿ç”¨**permutation**å‡½æ•°ï¼Œå³æ‰“æ•£åŸåˆ—è¡¨ï¼š


```python
np.random.permutation(my_list)
```




    array(['a', 'c', 'd', 'b'], dtype='<U1')



æœ€åï¼Œéœ€è¦æåˆ°çš„æ˜¯éšæœºç§å­ï¼Œå®ƒèƒ½å¤Ÿå›ºå®šéšæœºæ•°çš„è¾“å‡ºç»“æœï¼š


```python
np.random.seed(0)
np.random.rand()
```




    0.5488135039273248




```python
np.random.seed(0)
np.random.rand()
```




    0.5488135039273248



## 2ã€npæ•°ç»„çš„å˜å½¢ä¸åˆå¹¶  

**ã€aã€‘è½¬ç½®ï¼š`T`**


```python
np.zeros((2,3)).T
```




    array([[0., 0.],
           [0., 0.],
           [0., 0.]])



**ã€bã€‘åˆå¹¶æ“ä½œï¼šr_, c_**

å¯¹äºäºŒç»´æ•°ç»„è€Œè¨€ï¼Œr_å’Œc_åˆ†åˆ«è¡¨ç¤ºä¸Šä¸‹åˆå¹¶å’Œå·¦å³åˆå¹¶ï¼š


```python
np.r_[np.zeros((2,3)),np.zeros((2,3))]
```




    array([[0., 0., 0.],
           [0., 0., 0.],
           [0., 0., 0.],
           [0., 0., 0.]])




```python
np.c_[np.zeros((2,3)),np.random.randint(1,6,(2,3))]
```




    array([[0., 0., 0., 1., 1., 5.],
           [0., 0., 0., 3., 2., 1.]])



ä¸€ç»´æ•°ç»„å’ŒäºŒç»´æ•°ç»„è¿›è¡Œåˆå¹¶æ—¶ï¼Œåº”å½“æŠŠå…¶è§†ä½œåˆ—å‘é‡ï¼Œåœ¨é•¿åº¦åŒ¹é…çš„æƒ…å†µä¸‹åªèƒ½å¤Ÿä½¿ç”¨å·¦å³åˆå¹¶çš„c_æ“ä½œï¼š


```python
try:
     np.r_[np.array([0,0]),np.zeros((2,1))]
except Exception as e:
     Err_Msg = e
Err_Msg
```




    ValueError('all the input arrays must have same number of dimensions, but the array at index 0 has 1 dimension(s) and the array at index 1 has 2 dimension(s)')




```python
np.c_[np.random.rand(2), np.zeros(2)]
```




    array([[0.21655035, 0.        ],
           [0.13521817, 0.        ]])




```python
np.c_[np.array([1,2]),np.zeros(2)]
```




    array([[1., 0.],
           [2., 0.]])




```python
np.r_[np.array([1,2]),np.zeros(2)]
```




    array([1., 2., 0., 0.])




```python
np.c_[np.array([0,0]),np.zeros((2,3))]
```




    array([[0., 0., 0., 0.],
           [0., 0., 0., 0.]])



**ã€cã€‘ç»´åº¦å˜æ¢ï¼šreshape**

reshapeèƒ½å¤Ÿå¸®åŠ©ç”¨æˆ·æŠŠåŸæ•°ç»„æŒ‰ç…§æ–°çš„ç»´åº¦é‡æ–°æ’åˆ—ã€‚åœ¨ä½¿ç”¨æ—¶æœ‰ä¸¤ç§æ¨¡å¼ï¼Œåˆ†åˆ«ä¸ºCæ¨¡å¼å’ŒFæ¨¡å¼ï¼Œåˆ†åˆ«ä»¥é€è¡Œå’Œé€åˆ—çš„é¡ºåºè¿›è¡Œå¡«å……è¯»å–ã€‚


```python
arr1 = np.arange(8).reshape(2,4)

arr1
```




    array([[0, 1, 2, 3],
           [4, 5, 6, 7]])




```python
arr1.reshape(4,2)
```




    array([[0, 1],
           [2, 3],
           [4, 5],
           [6, 7]])



æŒ‰ç…§è¡Œè¯»å–å’Œå¡«å……


```python
arr1.reshape((4,2), order='C')
```




    array([[0, 1],
           [2, 3],
           [4, 5],
           [6, 7]])



æŒ‰ç…§åˆ—è¯»å–å’Œå¡«å……


```python
arr1.reshape((4,2), order='F')
```




    array([[0, 2],
           [4, 6],
           [1, 3],
           [5, 7]])



ç‰¹åˆ«åœ°ï¼Œç”±äºè¢«è°ƒç”¨æ•°ç»„çš„å¤§å°æ˜¯ç¡®å®šçš„ï¼Œreshapeå…è®¸æœ‰ä¸€ä¸ªç»´åº¦å­˜åœ¨ç©ºç¼ºï¼Œæ­¤æ—¶åªéœ€å¡«å……-1å³å¯ï¼š


```python
arr1.reshape(2, -1)
```




    array([[0, 1, 2, 3],
           [4, 5, 6, 7]])



ä¸‹é¢å°†n*1å¤§å°çš„æ•°ç»„è½¬ä¸º1ç»´æ•°ç»„çš„æ“ä½œæ˜¯ç»å¸¸ä½¿ç”¨çš„ï¼š


```python
arr2 = np.ones((3,1))
arr2
```




    array([[1.],
           [1.],
           [1.]])




```python
arr2.reshape(-1)
```




    array([1., 1., 1.])



## 3ã€npæ•°ç»„çš„åˆ‡ç‰‡ä¸ç´¢å¼•

æ•°ç»„çš„åˆ‡ç‰‡æ¨¡å¼æ”¯æŒä½¿ç”¨**slice**ç±»å‹çš„**`start:end:step`**åˆ‡ç‰‡ï¼Œè¿˜å¯ä»¥ç›´æ¥ä¼ å…¥åˆ—è¡¨æŒ‡å®šæŸä¸ªç»´åº¦çš„ç´¢å¼•è¿›è¡Œåˆ‡ç‰‡ï¼š


```python
arr1 = np.arange(9).reshape(3,3)
arr1
```




    array([[0, 1, 2],
           [3, 4, 5],
           [6, 7, 8]])




```python
arr1[:-1, [0,2]]  # æœ€åä¸€è¡Œé™¤å¤–ï¼Œç¬¬0å’Œç¬¬2åˆ—
```




    array([[0, 2],
           [3, 5]])



æ­¤å¤–ï¼Œè¿˜å¯ä»¥åˆ©ç”¨**np.ix_**åœ¨å¯¹åº”çš„ç»´åº¦ä¸Šä½¿ç”¨å¸ƒå°”ç´¢å¼•ï¼Œä½†æ­¤æ—¶ä¸èƒ½ä½¿ç”¨sliceåˆ‡ç‰‡ï¼š


```python
arr1[np.ix_([True, False, True], [True, False, True])] # è¡Œåˆ—éƒ½ä¸ºTrueæ—¶è¿”å›å¯¹åº”ä½ç½®çš„å€¼
```




    array([[0, 2],
           [6, 8]])




```python
arr1[np.ix_([True, False, True], [True, False, False])] # è¡Œåˆ—ä¸åŒæ—¶ä¸ºTrueæ—¶ï¼Œä¸è¿”å›
```




    array([[0],
           [6]])




```python
arr1[np.ix_([1,2], [True, False, True])]
```




    array([[3, 5],
           [6, 8]])



å½“æ•°ç»„ç»´åº¦ä¸º1ç»´æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå¸ƒå°”ç´¢å¼•ï¼Œè€Œæ— éœ€np.ix_ï¼š


```python
new = arr1.reshape(-1)
new[new%2==0]
```




    array([0, 2, 4, 6, 8])



## 4ã€å¸¸ç”¨å‡½æ•°

**ã€aã€‘where**

whereæ˜¯ä¸€ç§æ¡ä»¶å‡½æ•°ï¼Œå¯ä»¥æŒ‡å®šæ»¡è¶³æ¡ä»¶ä¸ä¸æ»¡è¶³æ¡ä»¶ä½ç½®å¯¹åº”çš„å¡«å……å€¼ï¼š


```python
a = np.array([-1,1,-1,0])
np.where(a>0, a, 5) # å¯¹åº”ä½ç½®ä¸ºTrueæ—¶å¡«å……aå¯¹åº”å…ƒç´ ï¼Œå¦åˆ™å¡«å……5
```




    array([5, 1, 5, 5])



**ã€bã€‘`nonzero`, `argmax`, `argmin`**

è¿™ä¸‰ä¸ªå‡½æ•°è¿”å›çš„éƒ½æ˜¯ç´¢å¼•ï¼Œ`nonzero`è¿”å›éé›¶æ•°çš„ç´¢å¼•ï¼Œ`argmax`, `argmin`åˆ†åˆ«è¿”å›æœ€å¤§å’Œæœ€å°æ•°çš„ç´¢å¼•ï¼š


```python
a = np.array([-2,-5,0,1,3,-1])
np.nonzero(a)
```




    (array([0, 1, 3, 4, 5], dtype=int64),)




```python
a.argmax()
```




    4




```python
a.argmin()
```




    1



**ã€cã€‘`any`, `all`**

`any`æŒ‡å½“åºåˆ—è‡³å°‘ **å­˜åœ¨ä¸€ä¸ª** `True`æˆ–éé›¶å…ƒç´ æ—¶è¿”å›`True`ï¼Œå¦åˆ™è¿”å›`False`

`all`æŒ‡å½“åºåˆ—å…ƒç´  **å…¨ä¸º** `True`æˆ–éé›¶å…ƒç´ æ—¶è¿”å›`True`ï¼Œå¦åˆ™è¿”å›`False`


```python
a = np.array([0,1])
a.any()
```




    True




```python
 a.all()
```




    False



**ã€dã€‘`cumprod`, `cumsum`, `diff`**

`cumprod`, `cumsum`åˆ†åˆ«è¡¨ç¤ºç´¯ä¹˜å’Œç´¯åŠ å‡½æ•°ï¼Œè¿”å›åŒé•¿åº¦çš„æ•°ç»„ï¼Œ`diff`è¡¨ç¤ºå’Œå‰ä¸€ä¸ªå…ƒç´ åšå·®ï¼Œ  
ç”±äºç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºç¼ºå¤±å€¼ï¼Œå› æ­¤åœ¨é»˜è®¤å‚æ•°æƒ…å†µä¸‹ï¼Œè¿”å›é•¿åº¦æ˜¯åŸæ•°ç»„å‡1


```python
a = np.array([1,2,3,5])
a.cumprod()
```




    array([ 1,  2,  6, 30], dtype=int32)




```python
a.cumsum()
```




    array([ 1,  3,  6, 11], dtype=int32)




```python
np.diff(a)
```




    array([1, 1, 2])



**ã€eã€‘ ç»Ÿè®¡å‡½æ•°**

å¸¸ç”¨çš„ç»Ÿè®¡å‡½æ•°åŒ…æ‹¬`max, min, mean, median(ä¸­ä½æ•°), std(æ ‡å‡†å·®), var(æ–¹å·®), sum, quantile(åˆ†ä½æ•°)`ï¼Œå…¶ä¸­åˆ†ä½æ•°è®¡ç®—æ˜¯å…¨å±€æ–¹æ³•ï¼Œå› æ­¤ä¸èƒ½é€šè¿‡`array.quantile`çš„æ–¹æ³•è°ƒç”¨ï¼š


```python
target = np.arange(1,10).reshape(3,-1)
target
```




    array([[1, 2, 3],
           [4, 5, 6],
           [7, 8, 9]])




```python
target.sum(0)  # 0-å„åˆ—æ±‚å’Œï¼›
```




    array([12, 15, 18])




```python
target.sum(1)  # 1-å„è¡Œæ±‚å’Œ
```




    array([ 6, 15, 24])



## 5ã€å¹¿æ’­æœºåˆ¶

å¹¿æ’­æœºåˆ¶ç”¨äºå¤„ç†ä¸¤ä¸ªä¸åŒç»´åº¦æ•°ç»„ä¹‹é—´çš„æ“ä½œï¼Œè¿™é‡Œåªè®¨è®ºä¸è¶…è¿‡ä¸¤ç»´çš„æ•°ç»„å¹¿æ’­æœºåˆ¶ã€‚

**ã€aã€‘æ ‡é‡å’Œæ•°ç»„çš„æ“ä½œ**

å½“ä¸€ä¸ªæ ‡é‡å’Œæ•°ç»„è¿›è¡Œè¿ç®—æ—¶ï¼Œæ ‡é‡ä¼šè‡ªåŠ¨æŠŠå¤§å°æ‰©å……ä¸ºæ•°ç»„å¤§å°ï¼Œä¹‹åè¿›è¡Œé€å…ƒç´ æ“ä½œï¼š


```python
res = 3 * np.ones((2,2)) + 1
res
```




    array([[4., 4.],
           [4., 4.]])




```python
res = 1 / res
res
```




    array([[0.25, 0.25],
           [0.25, 0.25]])



**ã€bã€‘äºŒç»´æ•°ç»„ä¹‹é—´çš„æ“ä½œ**

å½“ä¸¤ä¸ªæ•°ç»„ç»´åº¦å®Œå…¨ä¸€è‡´æ—¶ï¼Œä½¿ç”¨å¯¹åº”å…ƒç´ çš„æ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œé™¤éå…¶ä¸­çš„æŸä¸ªæ•°ç»„çš„ç»´åº¦æ˜¯ ğ‘šÃ—1 æˆ–è€… 1Ã—ğ‘› ï¼Œé‚£ä¹ˆä¼šæ‰©å……å…¶å…·æœ‰ 1 çš„ç»´åº¦ä¸ºå¦ä¸€ä¸ªæ•°ç»„å¯¹åº”ç»´åº¦çš„å¤§å°ã€‚ä¾‹å¦‚ï¼Œ 1Ã—2 æ•°ç»„å’Œ 3Ã—2 æ•°ç»„åšé€å…ƒç´ è¿ç®—æ—¶ä¼šæŠŠç¬¬ä¸€ä¸ªæ•°ç»„æ‰©å……ä¸º 3Ã—2 ï¼Œæ‰©å……æ—¶çš„å¯¹åº”æ•°å€¼è¿›è¡Œèµ‹å€¼ã€‚ä½†æ˜¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœç¬¬ä¸€ä¸ªæ•°ç»„çš„ç»´åº¦æ˜¯ 1Ã—3 ï¼Œé‚£ä¹ˆç”±äºåœ¨ç¬¬äºŒç»´ä¸Šçš„å¤§å°ä¸åŒ¹é…ä¸”ä¸ä¸º 1 ï¼Œæ­¤æ—¶æŠ¥é”™ã€‚


```python
res = np.ones((3,2))
res
```




    array([[1., 1.],
           [1., 1.],
           [1., 1.]])




```python
res * np.array([[2,3]]) # æ‰©å……ç¬¬ä¸€ç»´åº¦ä¸º3
```




    array([[2., 3.],
           [2., 3.],
           [2., 3.]])




```python
res * np.array([[2],[3],[4]]) # æ‰©å……ç¬¬äºŒç»´åº¦ä¸º2
```




    array([[2., 2.],
           [3., 3.],
           [4., 4.]])




```python
res * np.array([[2]]) # ç­‰ä»·äºä¸¤æ¬¡æ‰©å……
```




    array([[2., 2.],
           [2., 2.],
           [2., 2.]])



**ã€cã€‘ä¸€ç»´æ•°ç»„ä¸äºŒç»´æ•°ç»„çš„æ“ä½œ**

å½“ä¸€ç»´æ•°ç»„$A_k$ä¸äºŒç»´æ•°ç»„$B_{m,n}$æ“ä½œæ—¶ï¼Œç­‰ä»·äºæŠŠä¸€ç»´æ•°ç»„è§†ä½œ$A_{1,k}$çš„äºŒç»´æ•°ç»„ï¼Œä½¿ç”¨çš„å¹¿æ’­æ³•åˆ™ä¸ã€bã€‘ä¸­ä¸€è‡´ï¼Œå½“$k!=n$ä¸”$k,n$éƒ½ä¸æ˜¯$1$æ—¶æŠ¥é”™ã€‚


```python
np.ones(3) + np.ones((2,3))
```




    array([[2., 2., 2.],
           [2., 2., 2.]])




```python
np.ones(3) + np.ones((2,1))
```




    array([[2., 2., 2.],
           [2., 2., 2.]])




```python
np.ones(1) + np.ones((2,3))
```




    array([[2., 2., 2.],
           [2., 2., 2.]])



## 6ã€å‘é‡ä¸çŸ©é˜µçš„è®¡ç®—
**ã€aã€‘å‘é‡å†…ç§¯ï¼š`dot`**

$$\rm \mathbf{a}\cdot\mathbf{b} = \sum_ia_ib_i$$


```python
a = np.array([1,2,3])
b = np.array([1,3,5])
a.dot(b)
```




    22



**ã€bã€‘å‘é‡èŒƒæ•°å’ŒçŸ©é˜µèŒƒæ•°ï¼š`np.linalg.norm`**

åœ¨çŸ©é˜µèŒƒæ•°çš„è®¡ç®—ä¸­ï¼Œæœ€é‡è¦çš„æ˜¯`ord`å‚æ•°ï¼Œå¯é€‰å€¼å¦‚ä¸‹ï¼š

| ord | norm for matrices | norm for vectors |
| :---- | ----: | ----: |
| None   | Frobenius norm | 2-norm |
| 'fro'  | Frobenius norm  | / |
| 'nuc'  | nuclear norm    | / |
| inf    | max(sum(abs(x), axis=1))   | max(abs(x)) |
| -inf   | min(sum(abs(x), axis=1))  |  min(abs(x)) |
| 0      | /   |  sum(x != 0) |
| 1      | max(sum(abs(x), axis=0))  |  as below |
| -1     | min(sum(abs(x), axis=0))   |  as below |
| 2      | 2-norm (largest sing. value) | as below |
| -2     | smallest singular value    | as below |
| other  | /   | sum(abs(x)**ord)**(1./ord) |


```python
martix_target =  np.arange(4).reshape(-1,2)
martix_target
```




    array([[0, 1],
           [2, 3]])




```python
np.linalg.norm(martix_target, 'fro')
```




    3.7416573867739413




```python
np.linalg.norm(martix_target, np.inf)
```




    5.0




```python
np.linalg.norm(martix_target, 2)
```




    3.702459173643833




```python
vector_target =  np.arange(4)
vector_target
```




    array([0, 1, 2, 3])




```python
np.linalg.norm(vector_target, np.inf)
```




    3.0




```python
np.linalg.norm(vector_target, 2)
```




    3.7416573867739413




```python
np.linalg.norm(vector_target, 3)
```




    3.3019272488946263



**ã€cã€‘çŸ©é˜µä¹˜æ³•ï¼š`@`**

$$\rm [\mathbf{A}_{m\times p}\mathbf{B}_{p\times n}]_{ij} = \sum_{k=1}^p\mathbf{A}_{ik}\mathbf{B}_{kj}$$


```python
a = np.arange(4).reshape(-1,2)
a
```




    array([[0, 1],
           [2, 3]])




```python
b = np.arange(-4,0).reshape(-1,2)
b
```




    array([[-4, -3],
           [-2, -1]])




```python
a@b
```




    array([[ -2,  -1],
           [-14,  -9]])



# ä¸‰ã€ç»ƒä¹ 

## Ex1ï¼šåˆ©ç”¨åˆ—è¡¨æ¨å¯¼å¼å†™çŸ©é˜µä¹˜æ³•

ä¸€èˆ¬çš„çŸ©é˜µä¹˜æ³•æ ¹æ®å…¬å¼ï¼Œå¯ä»¥ç”±ä¸‰é‡å¾ªç¯å†™å‡ºï¼Œè¯·å°†å…¶æ”¹å†™ä¸ºåˆ—è¡¨æ¨å¯¼å¼çš„å½¢å¼ã€‚


```python
M1 = np.random.rand(2,3)
M2 = np.random.rand(3,4)
res = np.empty((M1.shape[0],M2.shape[1]))
for i in range(M1.shape[0]):
    for j in range(M2.shape[1]):
        item = 0
        for k in range(M1.shape[1]):
            item += M1[i][k] * M2[k][j]
        res[i][j] = item
((M1@M2 - res) < 1e-15).all() # æ’é™¤æ•°å€¼è¯¯å·®
```




    True



**ã€ç­”æ¡ˆã€‘**


```python
M1 = np.random.rand(2,3)
M2 = np.random.rand(3,4)
res = [[sum([M1[i][k] * M2[k][j] for k in range(M1.shape[1])]) for j in range(M2.shape[1])] for i in range(M1.shape[0])]
((M1@M2 - res) < 1e-15).all()
```




    True



### Ex2ï¼šæ›´æ–°çŸ©é˜µ
è®¾çŸ©é˜µ $A_{mÃ—n}$ ï¼Œç°åœ¨å¯¹ $A$ ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ è¿›è¡Œæ›´æ–°ç”ŸæˆçŸ©é˜µ $B$ ï¼Œæ›´æ–°æ–¹æ³•æ˜¯ $B_{ij}=A_{ij}\sum_{k=1}^n\frac{1}{A_{ik}}$ ï¼Œä¾‹å¦‚ä¸‹é¢çš„çŸ©é˜µä¸º $A$ ï¼Œåˆ™ $B_{2,2}=5\times(\frac{1}{4}+\frac{1}{5}+\frac{1}{6})=\frac{37}{12}$ ï¼Œè¯·åˆ©ç”¨ `Numpy` é«˜æ•ˆå®ç°ã€‚
$$\begin{split}A=\left[ \begin{matrix} 1 & 2 &3\\4&5&6\\7&8&9 \end{matrix} \right]\end{split}$$

**ã€ç­”æ¡ˆã€‘**


```python
A = np.arange(1,10).reshape(3,-1)
B = A*(1/A).sum(1).reshape(-1,1)  
B
```




    array([[1.83333333, 3.66666667, 5.5       ],
           [2.46666667, 3.08333333, 3.7       ],
           [2.65277778, 3.03174603, 3.41071429]])



**ä¸Šè¿°è¿‡ç¨‹æ‹†åˆ†å¦‚ä¸‹ï¼š**


```python
A = np.arange(1,10).reshape(3,-1)   
C = (1/A)         # å°†AçŸ©é˜µä¸­æ‰€æœ‰å…ƒç´ å€’è£…
D = C.sum(1)      # å°†ä¸Šè¿°çŸ©é˜µå„è¡Œæ±‚å’Œï¼Œè·å¾—æ–°çš„å‘é‡
E = D.reshape(-1,1) # è½¬æ¢ä¸º$A_n1$ 
E
```




    array([[1.83333333],
           [0.61666667],
           [0.37896825]])



åˆ©ç”¨å¹¿æ’­æœºåˆ¶ï¼Œå°†åŸçŸ©é˜µä¸æ–°çŸ©é˜µä¸­çš„å…ƒç´ åˆ†åˆ«ç›¸ä¹˜,**æ³¨æ„ä¸æ˜¯çŸ©é˜µä¹˜æ³•**


```python
A*E
```




    array([[1.83333333, 3.66666667, 5.5       ],
           [2.46666667, 3.08333333, 3.7       ],
           [2.65277778, 3.03174603, 3.41071429]])



## Ex3ï¼šå¡æ–¹ç»Ÿè®¡é‡

è®¾çŸ©é˜µ$A_{m\times n}$ï¼Œè®°$B_{ij} = \frac{(\sum_{i=1}^mA_{ij})\times (\sum_{j=1}^nA_{ij})}{\sum_{i=1}^m\sum_{i=1}^nA_{ij}}$ï¼Œå®šä¹‰å¡æ–¹å€¼å¦‚ä¸‹ï¼š
$$\chi^2 = \sum_{i=1}^m\sum_{j=1}^n\frac{(A_{ij}-B_{ij})^2}{B_{ij}}$$
è¯·åˆ©ç”¨`Numpy`å¯¹ç»™å®šçš„çŸ©é˜µ$A$è®¡ç®—$\chi^2$ 


```python
np.random.seed(0)
A = np.random.randint(10, 20, (8, 5))
```

**ã€ç­”æ¡ˆã€‘**


```python
np.random.seed(0)
A = np.random.randint(10, 20, (8, 5))
B = A.sum(0)*A.sum(1).reshape(-1, 1)/A.sum()
res = ((A-B)**2/B).sum()
res
```




    11.842696601945802



## Ex4ï¼šæ”¹è¿›çŸ©é˜µè®¡ç®—çš„æ€§èƒ½
è®¾$Z$ä¸º$mÃ—n$çš„çŸ©é˜µï¼Œ$B$å’Œ$U$åˆ†åˆ«æ˜¯$mÃ—p$å’Œ$pÃ—n$çš„çŸ©é˜µï¼Œ$B_i$ä¸º$B$çš„ç¬¬$i$è¡Œï¼Œ$U_j$ä¸º$U$çš„ç¬¬$j$åˆ—ï¼Œä¸‹é¢å®šä¹‰$\displaystyle R=\sum_{i=1}^m\sum_{j=1}^n\|B_i-U_j\|_2^2Z_{ij}$ï¼Œå…¶ä¸­$\|\mathbf{a}\|_2^2$è¡¨ç¤ºå‘é‡$a$çš„åˆ†é‡å¹³æ–¹å’Œ$\sum_i a_i^2$ã€‚

ç°æœ‰æŸäººæ ¹æ®å¦‚ä¸‹ç»™å®šçš„æ ·ä¾‹æ•°æ®è®¡ç®—$R$çš„å€¼ï¼Œè¯·å……åˆ†åˆ©ç”¨`Numpy`ä¸­çš„å‡½æ•°ï¼ŒåŸºäºæ­¤é—®é¢˜æ”¹è¿›è¿™æ®µä»£ç çš„æ€§èƒ½ã€‚


```python
np.random.seed(0)
m, n, p = 100, 80, 50
B = np.random.randint(0, 2, (m, p))
U = np.random.randint(0, 2, (p, n))
Z = np.random.randint(0, 2, (m, n))
def solution(B=B, U=U, Z=Z):
    L_res = []
    for i in range(m):
        for j in range(n):
            norm_value = ((B[i]-U[:,j])**2).sum()
            L_res.append(norm_value*Z[i][j])
    return sum(L_res)
solution(B, U, Z)
```




    100566



**ã€ç­”æ¡ˆã€‘**

æ”¹è¿›æ–¹æ³•ï¼š

ä»¤$Y_{ij} = \|B_i-U_j\|_2^2$ï¼Œåˆ™$\displaystyle R=\sum_{i=1}^m\sum_{j=1}^n Y_{ij}Z_{ij}$ï¼Œè¿™åœ¨`Numpy`ä¸­å¯ä»¥ç”¨é€å…ƒç´ çš„ä¹˜æ³•åæ±‚å’Œå®ç°ï¼Œå› æ­¤é—®é¢˜è½¬åŒ–ä¸ºäº†å¦‚ä½•æ„é€ `Y`çŸ©é˜µã€‚

$$
\begin{split}Y_{ij} &= \|B_i-U_j\|_2^2\\
&=\sum_{k=1}^p(B_{ik}-U_{kj})^2\\
&=\sum_{k=1}^p B_{ik}^2+\sum_{k=1}^p U_{kj}^2-2\sum_{k=1}^p B_{ik}U_{kj}\\\end{split}
$$

ä»ä¸Šå¼å¯ä»¥çœ‹å‡ºï¼Œç¬¬ä¸€ç¬¬äºŒé¡¹åˆ†åˆ«ä¸º$B$çš„è¡Œå¹³æ–¹å’Œä¸$U$çš„åˆ—å¹³æ–¹å’Œï¼Œç¬¬ä¸‰é¡¹æ˜¯ä¸¤å€çš„å†…ç§¯ã€‚å› æ­¤ï¼Œ$Y$çŸ©é˜µå¯ä»¥å†™ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ªéƒ¨åˆ†æ˜¯$mÃ—n$çš„å…¨$1$çŸ©é˜µæ¯è¡Œä¹˜ä»¥$B$å¯¹åº”è¡Œçš„è¡Œå¹³æ–¹å’Œï¼Œç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯ç›¸åŒå¤§å°çš„å…¨$1$çŸ©é˜µæ¯åˆ—ä¹˜ä»¥$U$å¯¹åº”åˆ—çš„åˆ—å¹³æ–¹å’Œï¼Œç¬¬ä¸‰ä¸ªéƒ¨åˆ†æ°ä¸º$B$çŸ©é˜µä¸$U$çŸ©é˜µä¹˜ç§¯çš„ä¸¤å€ã€‚ä»è€Œç»“æœå¦‚ä¸‹ï¼š


```python
(((B**2).sum(1).reshape(-1,1) + (U**2).sum(0) - 2*B@U)*Z).sum()
```




    100566



å¯¹æ¯”å®ƒä»¬çš„æ€§èƒ½ï¼š


```python
%timeit -n 30 solution(B, U, Z)
```

    60.4 ms Â± 979 Âµs per loop (mean Â± std. dev. of 7 runs, 30 loops each)
    


```python
%timeit -n 30 ((np.ones((m,n))*(B**2).sum(1).reshape(-1,1) + np.ones((m,n))*(U**2).sum(0) - 2*B@U)*Z).sum()
```

    717 Âµs Â± 98.5 Âµs per loop (mean Â± std. dev. of 7 runs, 30 loops each)
    

## Ex5ï¼šè¿ç»­æ•´æ•°çš„æœ€å¤§é•¿åº¦

è¾“å…¥ä¸€ä¸ªæ•´æ•°çš„`Numpy`æ•°ç»„ï¼Œè¿”å›å…¶ä¸­é€’å¢è¿ç»­æ•´æ•°å­æ•°ç»„çš„æœ€å¤§é•¿åº¦ï¼Œæ­£å‘æ˜¯æŒ‡é€’å¢æ–¹å‘ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥\[1,2,5,6,7\]ï¼Œ\[5,6,7\]ä¸ºå…·æœ‰æœ€å¤§é•¿åº¦çš„è¿ç»­æ•´æ•°å­æ•°ç»„ï¼Œå› æ­¤è¾“å‡º3ï¼›è¾“å…¥\[3,2,1,2,3,4,6\]ï¼Œ\[1,2,3,4\]ä¸ºå…·æœ‰æœ€å¤§é•¿åº¦çš„è¿ç»­æ•´æ•°å­æ•°ç»„ï¼Œå› æ­¤è¾“å‡º4ã€‚è¯·å……åˆ†åˆ©ç”¨`Numpy`çš„å†…ç½®å‡½æ•°å®Œæˆã€‚ï¼ˆæç¤ºï¼šè€ƒè™‘ä½¿ç”¨`nonzero, diff`å‡½æ•°ï¼‰


```python
f = lambda x:np.diff(np.nonzero(np.r_[1,np.diff(x)!=1,1])).max()
f([1,2,5,6,7])
f([3,2,1,2,3,4,6])
```




    4


